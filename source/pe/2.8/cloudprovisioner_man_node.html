---
layout: default
title: "PE 2.8 » Cloud Provisioning » Man » node"
subtitle: "Man Page: node"
---


<div class='mp'>
<h2 id="NAME">NAME</h2>
<p class="man-name">
  <code>puppet-node</code> - <span class="man-whatis">View and manage node definitions.</span>
</p>

<h2 id="SYNOPSIS">SYNOPSIS</h2>

<p>puppet node <var>action</var> [--terminus TERMINUS] [--extra HASH]</p>

<h2 id="DESCRIPTION">DESCRIPTION</h2>

<p>This subcommand interacts with node objects, which are used by Puppet to
build a catalog. A node object consists of the node's facts, environment,
node parameters (exposed in the parser as top-scope variables), and classes.</p>

<h2 id="OPTIONS">OPTIONS</h2>

<p>Note that any configuration parameter that's valid in the configuration
file is also a valid long argument, although it may or may not be
relevant to the present action. For example, <code>server</code> is a valid
configuration parameter, so you can specify <code>--server &lt;servername></code> as
an argument.</p>

<p>See the configuration file documentation at
<a href="http://docs.puppetlabs.com/references/stable/configuration.html" data-bare-link="true">http://docs.puppetlabs.com/references/stable/configuration.html</a> for the
full list of acceptable parameters. A commented list of all
configuration options can also be generated by running puppet with
<code>--genconfig</code>.</p>

<dl>
<dt>--mode MODE</dt><dd>The run mode to use for the current action. Valid modes are <code>user</code>, <code>agent</code>,
and <code>master</code>.</dd>
<dt>--render-as FORMAT</dt><dd>The format in which to render output. The most common formats are <code>json</code>,
<code>s</code> (string), <code>yaml</code>, and <code>console</code>, but other options such as <code>dot</code> are
sometimes available.</dd>
<dt>--verbose</dt><dd>Whether to log verbosely.</dd>
<dt class="flush">--debug</dt><dd>Whether to log debug information.</dd>
<dt>--extra HASH</dt><dd><p>A terminus can take additional arguments to refine the operation, which
are passed as an arbitrary hash to the back-end.  Anything passed as
the extra value is just send direct to the back-end.</p></dd>
<dt>--terminus TERMINUS</dt><dd><p>Indirector faces expose indirected subsystems of Puppet. These
subsystems are each able to retrieve and alter a specific type of data
(with the familiar actions of <code>find</code>, <code>search</code>, <code>save</code>, and <code>destroy</code>)
from an arbitrary number of pluggable backends. In Puppet parlance,
these backends are called terminuses.</p>

<p>Almost all indirected subsystems have a <code>rest</code> terminus that interacts
with the puppet master's data. Most of them have additional terminuses
for various local data models, which are in turn used by the indirected
subsystem on the puppet master whenever it receives a remote request.</p>

<p>The terminus for an action is often determined by context, but
occasionally needs to be set explicitly. See the "Notes" section of this
face's manpage for more details.</p></dd>
</dl>


<h2 id="ACTIONS">ACTIONS</h2>

<ul>
<li><p><code>classify</code> - Add a node to a console or Dashboard group.:
<code>SYNOPSIS</code></p>

<p>puppet node classify [--terminus TERMINUS]
[--extra HASH]
[--enc-ssl]
[--enc-server=]
[--enc-port=]
[--enc-auth-user=]
[--enc-auth-passwd=]
[--node-group= | --as=]
<var>certname</var></p>

<p><code>DESCRIPTION</code></p>

<p>Add node <var>certname</var> to a group in Puppet Dashboard, Puppet Enterprise's
console, or any external node classifier that provides a similar API.</p>

<p>Classification of a node will allow it to receive proper configurations
on its next Puppet run. This action assumes that you have already
created a console or Dashboard group with the classes the node should
receive in its configuration catalog.</p>

<p>This action can be used on both physical and virtual machines, and can
be run multiple times for a single node. This action can be safely run
before the <code>install</code> action.</p>

<p><code>OPTIONS</code></p>

<p><var>--enc-auth-passwd=</var> -
PE's console and Puppet Dashboard can be secured using HTTP
authentication.  If the console or dashboard is configured with HTTP
authentication, use this option to supply credentials for accessing it.</p>

<p>Note: This option will default to the PUPPET_ENC_AUTH_PASSWD
environment variable.  Please use this environment variable if you
are concerned about usernames and passwords being exposed via the
Unix process table.</p>

<p><var>--enc-auth-user=</var> -
PE's console and Puppet Dashboard can be secured using HTTP
authentication.  If the console or dashboard is configured with HTTP
authentication, use this option to supply credentials for accessing it.</p>

<p>Note: This option will default to the PUPPET_ENC_AUTH_USER
environment variable.  Please use this environment variable if you
are concerned about usernames and passwords being exposed via the
Unix process table.</p>

<p><var>--enc-port=</var> -
The port of the External Node Classifier.  This currently only
supports Puppet Enterprise's console and Puppet Dashboard as external
node classifiers.</p>

<p><var>--enc-server=</var> -
The hostname of the external node classifier.  This currently only
supports Puppet Enterprise's console and Puppet Dashboard as external
node classifiers.</p>

<p><var>--enc-ssl</var> -
By default, we do not connect to the ENC over SSL.  This option
configures all HTTP connections to the ENC to use SSL in order to
provide encryption. This option should be set when using Puppet
Enterprise 2.0 and higher.</p>

<p><var>--node-group=</var> | <var>--as=</var> -
The PE console or Puppet Dashboard group to associate the node with.
The group must already exist in the ENC, or an error will be
returned.  If the node has not been registered with the ENC, it will
automatically be registered when assigning it to a group.</p></li>
<li><p><code>clean</code> - Clean up everything a puppetmaster knows about a node:
<code>SYNOPSIS</code></p>

<p>puppet node clean [--terminus TERMINUS]
[--extra HASH]
[--[no-]unexport]
<var>host1</var> [<var>host2</var> ...]</p>

<p><code>DESCRIPTION</code></p>

<p>This includes</p>

<ul>
<li>Signed certificates ($vardir/ssl/ca/signed/node.domain.pem)</li>
<li>Cached facts ($vardir/yaml/facts/node.domain.yaml)</li>
<li>Cached node stuff ($vardir/yaml/node/node.domain.yaml)</li>
<li>Reports ($vardir/reports/node.domain)</li>
<li>Stored configs: it can either remove all data from an host in your
storedconfig database, or with --unexport turn every exported resource
supporting ensure to absent so that any other host checking out their
config can remove those exported configurations.</li>
</ul>


<p>This will unexport exported resources of a
host, so that consumers of these resources can remove the exported
resources and we will safely remove the node from our
infrastructure.</p>

<p><code>OPTIONS</code></p>

<p><var>--[no-]unexport</var> -
Unexport exported resources</p></li>
<li><p><code>destroy</code> - Invalid for this subcommand.:
<code>SYNOPSIS</code></p>

<p>puppet node destroy [--terminus TERMINUS] [--extra HASH] <var>key</var></p>

<p><code>DESCRIPTION</code></p>

<p>Invalid for this subcommand.</p></li>
<li><p><code>find</code> - Retrieve a node object.:
<code>SYNOPSIS</code></p>

<p>puppet node find [--terminus TERMINUS] [--extra HASH] <var>host</var></p>

<p><code>DESCRIPTION</code></p>

<p>Retrieve a node object.</p>

<p><code>RETURNS</code></p>

<p>A hash containing the node's <code>classes</code>, <code>environment</code>, <code>expiration</code>, <code>name</code>,
<code>parameters</code> (its facts, combined with any ENC-set parameters), and <code>time</code>.
When used from the Ruby API: a Puppet::Node object.</p>

<p>RENDERING ISSUES: Rendering as string and json are currently broken;
node objects can only be rendered as yaml.</p></li>
<li><p><code>info</code> - Print the default terminus class for this face.:
<code>SYNOPSIS</code></p>

<p>puppet node info [--terminus TERMINUS] [--extra HASH]</p>

<p><code>DESCRIPTION</code></p>

<p>Prints the default terminus class for this subcommand. Note that different
run modes may have different default termini; when in doubt, specify the
run mode with the '--mode' option.</p></li>
<li><p><code>init</code> - Install Puppet on a node and classify it.:
<code>SYNOPSIS</code></p>

<p>puppet node init [--terminus TERMINUS]
[--extra HASH]
[--facts=]
<var>--login= | -l= | --username=</var>
<var>--keyfile=</var>
[--installer-payload=]
[--installer-answers=]
[--puppetagent-certname=]
[--install-script=]
[--puppet-version=]
[--pe-version=]
[--facter-version=]
[--enc-ssl]
[--enc-server=]
[--enc-port=]
[--enc-auth-user=]
[--enc-auth-passwd=]
[--node-group= | --as=]</p>

<p><code>DESCRIPTION</code></p>

<p>Installs Puppet on an arbitrary node (see "install"), classify it in
Puppet Dashboard or Puppet Enterprise's console (see "classify"), and
automatically sign its certificate request (using the <code>certificate</code>
face's <code>sign</code> action).</p>

<p><code>OPTIONS</code></p>

<p><var>--enc-auth-passwd=</var> -
PE's console and Puppet Dashboard can be secured using HTTP
authentication.  If the console or dashboard is configured with HTTP
authentication, use this option to supply credentials for accessing it.</p>

<p>Note: This option will default to the PUPPET_ENC_AUTH_PASSWD
environment variable.  Please use this environment variable if you
are concerned about usernames and passwords being exposed via the
Unix process table.</p>

<p><var>--enc-auth-user=</var> -
PE's console and Puppet Dashboard can be secured using HTTP
authentication.  If the console or dashboard is configured with HTTP
authentication, use this option to supply credentials for accessing it.</p>

<p>Note: This option will default to the PUPPET_ENC_AUTH_USER
environment variable.  Please use this environment variable if you
are concerned about usernames and passwords being exposed via the
Unix process table.</p>

<p><var>--enc-port=</var> -
The port of the External Node Classifier.  This currently only
supports Puppet Enterprise's console and Puppet Dashboard as external
node classifiers.</p>

<p><var>--enc-server=</var> -
The hostname of the external node classifier.  This currently only
supports Puppet Enterprise's console and Puppet Dashboard as external
node classifiers.</p>

<p><var>--enc-ssl</var> -
By default, we do not connect to the ENC over SSL.  This option
configures all HTTP connections to the ENC to use SSL in order to
provide encryption. This option should be set when using Puppet
Enterprise 2.0 and higher.</p>

<p><var>--facter-version=</var> -
The version of facter that should be installed.
This only makes sense in open source installation
mode.</p>

<p><var>--facts=</var> -
To install custom facts during install of a node, use the format
fact1=value,fact2=value. Currently, there is no way to escape
the ',' character so facts cannot contain this character.</p>

<p>Requirements:
For community installs of puppet, i.e. not Puppet Enterprise,
the Puppet Labs' <code>stdlib</code> module will be required. It can be found
at 'http://forge.puppetlabs.com/puppetlabs/stdlib' or installed
with the command 'puppet-module install puppetlabs/stdlib'.</p>

<p>For Puppet Enterprise installs, there are no extra requirements
for this option to work</p>

<p><var>--install-script=</var> -
Name of the installation template to use when installing Puppet. The current
list of supported templates is: gems, puppet-enterprise</p>

<p><var>--installer-answers=</var> -
Location of the answers file that should be copied to the machine
to install Puppet Enterprise.</p>

<p><var>--installer-payload=</var> -
Location of the Puppet enterprise universal tarball to be used for
the installation. Can be a local file path or a URL. This option is
only required if Puppet should be installed on the machine. The
tarball specified must be gzipped.</p>

<p><var>--keyfile=</var> -
The filesystem path to a local private key that can be used to SSH
into the node. If the node was created with the <code>node_aws</code> <code>create</code>
action, this should be the path to the private key file downloaded
from the Amazon EC2 interface.</p>

<p>Specify 'agent' if you have the key loaded in ssh-agent and
available via the SSH_AUTH_SOCK variable.</p>

<p><var>--login=</var> | <var>-l=</var> | <var>--username=</var> -
The name of the user Puppet should use when logging in to the node.
This user should configured to allow passwordless access via the SSH
key supplied in the --keyfile option.</p>

<p>This is usually the root user.</p>

<p><var>--node-group=</var> | <var>--as=</var> -
The PE console or Puppet Dashboard group to associate the node with.
The group must already exist in the ENC, or an error will be
returned.  If the node has not been registered with the ENC, it will
automatically be registered when assigning it to a group.</p>

<p><var>--pe-version=</var> -
Version of Puppet Enterprise to be passed to the installer script.
Defaults to 1.1.</p>

<p><var>--puppet-version=</var> -
Version of Puppet to be installed. This version is
passed to the Puppet installer script.</p>

<p><var>--puppetagent-certname=</var> -
This option allows you to specify an optional puppet agent
certificate name to configure on the target system.  This option
applies to the puppet-enterprise and puppet-enterprise-http
installation scripts.  If provided, this option will replace any
puppet agent certificate name provided in the puppet enterprise
answers file.  This certificate name will show up in the console (or
Puppet Dashboard) when the agent checks in for the first time.</p></li>
<li><p><code>install</code> - Install Puppet on a running node.:
<code>SYNOPSIS</code></p>

<p>puppet node install [--terminus TERMINUS]
[--extra HASH]
[--facts=]
<var>--login= | -l= | --username=</var>
<var>--keyfile=</var>
[--installer-payload=]
[--installer-answers=]
[--puppetagent-certname=]
[--install-script=]
[--puppet-version=]
[--pe-version=]
[--facter-version=]
<var>hostname_or_ip</var></p>

<p><code>DESCRIPTION</code></p>

<p>Installs Puppet on an existing node at <var>hostname_or_ip</var>. It uses scp to
copy installation requirements to the machine, and ssh to run the
installation commands remotely.</p>

<p>This action can be used on both physical and virtual machines.</p>

<p><code>OPTIONS</code></p>

<p><var>--facter-version=</var> -
The version of facter that should be installed.
This only makes sense in open source installation
mode.</p>

<p><var>--facts=</var> -
To install custom facts during install of a node, use the format
fact1=value,fact2=value. Currently, there is no way to escape
the ',' character so facts cannot contain this character.</p>

<p>Requirements:
For community installs of puppet, i.e. not Puppet Enterprise,
the Puppet Labs' <code>stdlib</code> module will be required. It can be found
at 'http://forge.puppetlabs.com/puppetlabs/stdlib' or installed
with the command 'puppet-module install puppetlabs/stdlib'.</p>

<p>For Puppet Enterprise installs, there are no extra requirements
for this option to work</p>

<p><var>--install-script=</var> -
Name of the installation template to use when installing Puppet. The current
list of supported templates is: gems, puppet-enterprise</p>

<p><var>--installer-answers=</var> -
Location of the answers file that should be copied to the machine
to install Puppet Enterprise.</p>

<p><var>--installer-payload=</var> -
Location of the Puppet enterprise universal tarball to be used for
the installation. Can be a local file path or a URL. This option is
only required if Puppet should be installed on the machine. The
tarball specified must be gzipped.</p>

<p><var>--keyfile=</var> -
The filesystem path to a local private key that can be used to SSH
into the node. If the node was created with the <code>node_aws</code> <code>create</code>
action, this should be the path to the private key file downloaded
from the Amazon EC2 interface.</p>

<p>Specify 'agent' if you have the key loaded in ssh-agent and
available via the SSH_AUTH_SOCK variable.</p>

<p><var>--login=</var> | <var>-l=</var> | <var>--username=</var> -
The name of the user Puppet should use when logging in to the node.
This user should configured to allow passwordless access via the SSH
key supplied in the --keyfile option.</p>

<p>This is usually the root user.</p>

<p><var>--pe-version=</var> -
Version of Puppet Enterprise to be passed to the installer script.
Defaults to 1.1.</p>

<p><var>--puppet-version=</var> -
Version of Puppet to be installed. This version is
passed to the Puppet installer script.</p>

<p><var>--puppetagent-certname=</var> -
This option allows you to specify an optional puppet agent
certificate name to configure on the target system.  This option
applies to the puppet-enterprise and puppet-enterprise-http
installation scripts.  If provided, this option will replace any
puppet agent certificate name provided in the puppet enterprise
answers file.  This certificate name will show up in the console (or
Puppet Dashboard) when the agent checks in for the first time.</p></li>
<li><p><code>save</code> - Invalid for this subcommand.:
<code>SYNOPSIS</code></p>

<p>puppet node save [--terminus TERMINUS] [--extra HASH] <var>node object</var></p>

<p><code>DESCRIPTION</code></p>

<p>Invalid for this subcommand.</p></li>
<li><p><code>search</code> - Invalid for this subcommand.:
<code>SYNOPSIS</code></p>

<p>puppet node search [--terminus TERMINUS] [--extra HASH] <var>query</var></p>

<p><code>DESCRIPTION</code></p>

<p>Invalid for this subcommand.</p></li>
</ul>


<h2 id="EXAMPLES">EXAMPLES</h2>

<p><code>classify</code></p>

<p>Add the agent01.example.com node to the pe_agents group:</p>

<pre><code>puppet node classify \
  --enc-server puppetmaster.example.com \
  --enc-port 3000 \
  --enc-ssl \
  --node-group pe_agents \
  agent01.example.com
</code></pre>

<p><code>find</code></p>

<p>Retrieve an "empty" (no classes, no ENC-imposed parameters, and an
environment of "production") node:</p>

<p>$ puppet node find somenode.puppetlabs.lan --terminus plain --render-as yaml</p>

<p>Retrieve a node using the puppet master's configured ENC:</p>

<p>$ puppet node find somenode.puppetlabs.lan --terminus exec --mode master --render-as yaml</p>

<p>Retrieve the same node from the puppet master:</p>

<p>$ puppet node find somenode.puppetlabs.lan --terminus rest --render-as yaml</p>

<h2 id="NOTES">NOTES</h2>

<p>This subcommand is an indirector face, which exposes <code>find</code>, <code>search</code>, <code>save</code>,
and <code>destroy</code> actions for an indirected subsystem of Puppet. Valid termini for
this face include:</p>

<ul>
<li><code>active_record</code></li>
<li><code>exec</code></li>
<li><code>ldap</code></li>
<li><code>memory</code></li>
<li><code>plain</code></li>
<li><code>rest</code></li>
<li><code>store_configs</code></li>
<li><code>yaml</code></li>
</ul>


<h2 id="COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</h2>

<p>Copyright 2011 by Puppet Labs
Apache 2 license; see COPYING</p>

</div>

<hr>

<p><a href="./compliance_basics.html">Next: Compliance Basics and UI</a> </p>

<hr />

